<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-关于SpringBoot的定时注解-Scheduled" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/04/03/%E5%85%B3%E4%BA%8ESpringBoot%E7%9A%84%E5%AE%9A%E6%97%B6%E6%B3%A8%E8%A7%A3-Scheduled/" class="article-date">
  <time datetime="2021-04-03T04:13:15.000Z" itemprop="datePublished">2021-04-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/03/%E5%85%B3%E4%BA%8ESpringBoot%E7%9A%84%E5%AE%9A%E6%97%B6%E6%B3%A8%E8%A7%A3-Scheduled/">关于SpringBoot的定时注解@Scheduled</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="关于SpringBoot的定时注解-Scheduled"><a href="#关于SpringBoot的定时注解-Scheduled" class="headerlink" title="关于SpringBoot的定时注解@Scheduled"></a>关于SpringBoot的定时注解@Scheduled</h1><p>SpringBoot中又自带的定时方法，要开启定时任务，就需要通过在启动类上添加注解@EnableScheduling,在SpringBoot中，Enable+xxx都是代表开启某种服务。<br>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> love.simbot.example.lovelycatsbdemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.spring.autoconfigure.EnableSimbot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableScheduling</span> <span class="comment">// 开启定时任务功能</span></span><br><span class="line"><span class="meta">@EnableSimbot</span><span class="comment">//开启simbot服务</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimbotExampleApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SimbotExampleApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后再使用@Component和@Scheduled(cron=”0/5 ** ** ?”)启动定时任务。·</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> love.simbot.example.lovelycatsbdemo.util;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Lazy;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Async;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Scheduled;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.api.sender.BotSender;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.bot.Bot;</span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.bot.BotManager;</span><br><span class="line"><span class="keyword">import</span> love.simbot.example.lovelycatsbdemo.service.JdNoticeService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span><span class="comment">//把普通pojo实例化到spring容器中，相当于配置文件中的</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SaticScheduleTask</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="keyword">private</span> BotManager manager;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="keyword">private</span> JdNoticeService jdNoticeService;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendGD</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 一般如果你只注册了一个bot，那么可以直接使用此方法。</span></span><br><span class="line">        Bot defaultBot = manager.getDefaultBot();</span><br><span class="line">        BotSender sender = defaultBot.getSender();</span><br><span class="line">        sender.SENDER.sendGroupMsg( <span class="string">"24809150941@chatroom"</span>, <span class="string">"打点"</span> );</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Scheduled</span>(cron = <span class="string">"0 55 15 ? * *"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send15</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    sendGD();</span><br><span class="line"></span><br><span class="line">    System.err.println(<span class="string">"发送成功"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>并且要注意，@Scheduled注解是加的方法，<strong>不能含有参数</strong>！！！<br>并且该注解有个特点，该方法是单线程，如果有多个定时任务，需要开启多线程，否则一旦其中一个方法卡住未执行，会导致其他定时任务失效，所以有多个定时任务的话，需要配置开启多线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> love.simbot.example.lovelycatsbdemo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableAsync;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScheduleConfig</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> corePoolSize = <span class="number">10</span>;<span class="comment">//保持活跃的线程</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> maxPoolSize = <span class="number">200</span>;<span class="comment">//可以创建的最大线程</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> queueCapacity = <span class="number">10</span>;<span class="comment">//任务队列容量</span></span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Executor <span class="title">taskExecutor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		ThreadPoolTaskExecutor executor = <span class="keyword">new</span> ThreadPoolTaskExecutor();</span><br><span class="line">		executor.setCorePoolSize(corePoolSize);</span><br><span class="line">		executor.setMaxPoolSize(maxPoolSize);</span><br><span class="line">		executor.setQueueCapacity(queueCapacity);</span><br><span class="line">		executor.initialize();<span class="comment">//初始化</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> executor;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在管家中，关于该注解主要用于定时发布消息的功能。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/04/03/%E5%85%B3%E4%BA%8ESpringBoot%E7%9A%84%E5%AE%9A%E6%97%B6%E6%B3%A8%E8%A7%A3-Scheduled/" data-id="ckqs8wsu20000o0u3748bdosm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-关于SimBot的学习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/09/%E5%85%B3%E4%BA%8ESimBot%E7%9A%84%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time datetime="2021-03-09T14:25:13.000Z" itemprop="datePublished">2021-03-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/03/09/%E5%85%B3%E4%BA%8ESimBot%E7%9A%84%E5%AD%A6%E4%B9%A0/">关于SimBot的学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="近期总结"><a href="#近期总结" class="headerlink" title="近期总结"></a>近期总结</h2><p>自从去年入职京东，当了好久的咸鱼了，体验了接近007的工作生活，又没有什么技术性的东西。有做的内容也都是围绕着BadUsb以及一些自己所需的内容开发,技术好久没有更新，并且很多东西逐渐遗忘，连这个个人博客都大半年没维护了，现在开始，需要给自己定个目标，定时抽出午睡时间去学习一些新技术，先把Redis看完，每周末更新一次博客，写笔记，然后把项目维护好。</p>
<h2 id="关于SimBot前言"><a href="#关于SimBot前言" class="headerlink" title="关于SimBot前言"></a>关于SimBot前言</h2><p>这期主要是关于SimBot的学习，因为在当地，大多数商家使用微信来与京东营业部人员、商服对接，满足日常的工作需求。但很多时候商家需要询问营业部人员的事很多是已经有公告文档，商家作为消费者，不愿去自主学习那些东西或者是不确定文档是否有更新，导致成了要用的时候，便询问营业部人员或者商服，增加不必要的工作负担。并且有些时候，没及时对商家进行一个回复，商家体验度不好。 从该处出发，便想自己做一个可以实时盯着商家微信群，及时处理商家问题的工具，这时候便使用的SimBot。SimBot是一个关于QQ、微信等聊天工具的一个机器人框架，有着一系列对这些聊天工具的操作类，但其需要有特定的对接软件，例如QQ使用的是QQmini，微信使用的是可爱猫+HttpApi。<strong>本文主要是编写对于微信的开发。</strong></p>
<h3 id="关于SimBot对微信机器人开发环境搭建"><a href="#关于SimBot对微信机器人开发环境搭建" class="headerlink" title="关于SimBot对微信机器人开发环境搭建"></a>关于SimBot对微信机器人开发环境搭建</h3><p>SimBot对于微信的开发需要先下载可爱猫+HttpApi插件，我这里使用的是4.4.0版本的可爱猫。</p>
<p>开发环境搭建：链接：<a href="https://pan.baidu.com/s/1tfJdSyv9Mtn_VemfwGsYfA" target="_blank" rel="noopener">https://pan.baidu.com/s/1tfJdSyv9Mtn_VemfwGsYfA</a><br>提取码：1458<br>复制这段内容后打开百度网盘手机App，操作更方便哦</p>
<p>这个压缩包里面已经带了插件了，但是因为可爱猫是易语言编写的，会报错，第一次下载需要将可爱猫丢进杀毒软件的白名单。</p>
<p>可爱猫也需要对应的版本，根据提示下载即可，然后把<strong>微信自动更新</strong>给关了。<br>先运行点歌插件，看一下可爱猫环境是否异常，再开始配置HttpApi插件。<br>可爱猫也有搭载日志模块，可以再日志中看运行的问题</p>
<h4 id="HttpApi插件配置"><a href="#HttpApi插件配置" class="headerlink" title="HttpApi插件配置"></a>HttpApi插件配置</h4><p>HttpApi插件配置是整个整理关键的一步，如果配置错误会导致SimBot运行起来无法与可爱猫对接，所以需要注意这个。<br>HttpApi需要配置的几个：<br>1、<strong>本地服务设置</strong>，API地址的端口，这个是涉及到之后关于SimBot搭建的配置，通过这个端口去获取微信机器人。<br>2、<strong>消息推送配置</strong>，这个配置是SimBot于HttpAoi一个信息的回传，也是后面使用SimBot获取消息、发送消息的关键配置，这个地址一般需要等simBot跑起来才可以去eclipse的开发环境查看地址，获取填充进去，也可以提前预设，但是如果没有使用SpringBoot搭建的SimBot，IP地址每次运行都会有一定变化，所以需要注意。</p>
<h3 id="SimBot在JAVA中的搭建"><a href="#SimBot在JAVA中的搭建" class="headerlink" title="SimBot在JAVA中的搭建"></a>SimBot在JAVA中的搭建</h3><p>SimBot搭建，第一步，先配置POM文件，具体POM配置可以参考：<a href="https://www.yuque.com/simpler-robot/simpler-robot-doc/czcli0" target="_blank" rel="noopener">https://www.yuque.com/simpler-robot/simpler-robot-doc/czcli0</a>   ，不多描述。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;properties&gt;</span><br><span class="line">        &lt;simbot.version&gt;2.0.1&lt;&#x2F;simbot.version&gt;</span><br><span class="line">    &lt;&#x2F;properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencyManagement&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">            &lt;!-- 通过parent进行版本控制。当然，也可以直接放到 parent 标签中。 --&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;love.forte.simple-robot&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;parent&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;simbot.version&#125;&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;type&gt;pom&lt;&#x2F;type&gt;</span><br><span class="line">                &lt;scope&gt;import&lt;&#x2F;scope&gt;</span><br><span class="line">            &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;&#x2F;dependencies&gt;</span><br><span class="line">    &lt;&#x2F;dependencyManagement&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;!-- 可爱猫组件依赖。如果使用版本控制，则不需要填写version。 --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;love.forte.simple-robot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;component-lovelycat-httpapi&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"> </span><br><span class="line">        </span><br><span class="line">    &lt;&#x2F;dependencies&gt;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;!-- compiler plugin. --&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;maven-compiler-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;source&gt;8&lt;&#x2F;source&gt;</span><br><span class="line">                    &lt;target&gt;8&lt;&#x2F;target&gt;</span><br><span class="line">                    &lt;compilerArgs&gt;</span><br><span class="line">                        &lt;arg&gt;-parameters&lt;&#x2F;arg&gt;</span><br><span class="line">                    &lt;&#x2F;compilerArgs&gt;</span><br><span class="line">                &lt;&#x2F;configuration&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">            &lt;!-- 打包插件 --&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;2.3.4.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;mainClass&gt;test.Test&lt;&#x2F;mainClass&gt;</span><br><span class="line">                &lt;&#x2F;configuration&gt;</span><br><span class="line">                &lt;executions&gt;</span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;repackage&lt;&#x2F;goal&gt;</span><br><span class="line">                        &lt;&#x2F;goals&gt;</span><br><span class="line">                    &lt;&#x2F;execution&gt;</span><br><span class="line">                &lt;&#x2F;executions&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">        &lt;&#x2F;plugins&gt;</span><br><span class="line">    &lt;&#x2F;build&gt;</span><br></pre></td></tr></table></figure>
<p>POM依赖需要注意的一点是，不要配错，配错容易项目跑不起来</p>
<p>POM依赖引入完，接下来就是关键的配置，配置如果配错，常见问题就是端口对接不上、微信号对接不上，导致的项目跑步起来<br><strong>配置文档：</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">simbot:</span></span><br><span class="line">  <span class="attr">core:</span></span><br><span class="line">    <span class="attr">bots:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">微信编号:http://127.0.0.1:88/httpAPI</span></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">  <span class="attr">component:</span></span><br><span class="line">    <span class="attr">lovelycat:</span></span><br><span class="line">      <span class="attr">server:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8088</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">/send</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">api:</span></span><br><span class="line">        <span class="attr">cache:</span></span><br><span class="line">          <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">duration:</span> <span class="number">30</span></span><br><span class="line">          <span class="attr">durationUnit:</span> <span class="string">SECONDS</span></span><br></pre></td></tr></table></figure>

<p>具体配置过程参考：<a href="https://www.yuque.com/simpler-robot/simpler-robot-doc/ygx7be" target="_blank" rel="noopener">https://www.yuque.com/simpler-robot/simpler-robot-doc/ygx7be</a><br>这个配置主要要提到<strong>bots</strong>以及<strong>lovelycat</strong>的配置。<br>第一个<strong>bot</strong>的配置主要是获取机器人的所在端口，微信编号通过可爱猫的账号登录处的wxid获取，IP地址则是在HttpApi中获取，那个对应里面的<strong>本地服务设置</strong>获取。而<strong>lovelycat</strong>的配置则是控制项目跑起来以后会存在于哪个端口，后期需要于可爱猫中的HttpApi的<strong>消息推送</strong>地址匹配，项目才能接收的到来自机器人的内容。</p>
<h2 id="创建启动类以及监听"><a href="#创建启动类以及监听" class="headerlink" title="创建启动类以及监听"></a>创建启动类以及监听</h2><p>当所有配置配置完以后，下一步要创建启动类了，启动类的创建参考：<a href="https://www.yuque.com/simpler-robot/simpler-robot-doc/oq9ex6" target="_blank" rel="noopener">https://www.yuque.com/simpler-robot/simpler-robot-doc/oq9ex6</a>  。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> steward;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.annotation.SimbotApplication;</span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.core.SimbotApp;</span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.core.SimbotContext;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SimbotApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">stewardmain</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	        <span class="keyword">final</span> SimbotContext context = SimbotApp.run(stewardmain<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">	    &#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动类创建完以后就是创建一个监听器，参考：<a href="https://www.yuque.com/simpler-robot/simpler-robot-doc/qmpgzt" target="_blank" rel="noopener">https://www.yuque.com/simpler-robot/simpler-robot-doc/qmpgzt</a>  当这两个创建好，运行一下项目，然后获取一下项目启动的远端、端口，将其配置到可爱猫的HttpApi中，然后再拿个微信号测试一下，看一下是否正常运行即可。<br><strong>监听器</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> steward.listen;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> love.forte.common.ioc.annotation.Beans;</span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.annotation.Filter;</span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.annotation.OnGroup;</span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.annotation.OnPrivate;</span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.api.message.events.GroupMsg;</span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.api.message.events.PrivateMsg;</span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.api.sender.MsgSender;</span><br><span class="line"><span class="keyword">import</span> love.forte.simbot.filter.MatchType;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Beans</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 监听私聊消息并复读。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnPrivate</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">privateMsg</span><span class="params">(PrivateMsg privateMsg, MsgSender sender)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// MsgSender中存在三大送信器，以及非常多的重载方法。</span></span><br><span class="line">    	System.err.println(<span class="string">"接收测试1"</span>);</span><br><span class="line">    	System.err.println(privateMsg);</span><br><span class="line">    	System.err.println(privateMsg.getMsgContent());</span><br><span class="line">        sender.SENDER.sendPrivateMsg(privateMsg, <span class="string">"完成接收"</span>);</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnPrivate</span></span><br><span class="line">    <span class="meta">@Filter</span>(value = <span class="string">"计算运费"</span>, matchType = MatchType.STARTS_WITH)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">batchcount</span><span class="params">(PrivateMsg privateMsg, MsgSender sender)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// MsgSender中存在三大送信器，以及非常多的重载方法。</span></span><br><span class="line">    	System.err.println(<span class="string">"接收测试1"</span>);</span><br><span class="line">    	System.err.println(privateMsg);</span><br><span class="line">    	</span><br><span class="line">    	System.err.println(privateMsg.getMsgContent());</span><br><span class="line">        sender.SENDER.sendPrivateMsg(privateMsg, <span class="string">"完成接收"</span>);</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 监听消息开头为 "mua" 或者 "hi" 的消息并复读。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnGroup</span></span><br><span class="line">    <span class="meta">@Filter</span>(value = <span class="string">"mua"</span>, matchType = MatchType.STARTS_WITH)</span><br><span class="line">    <span class="meta">@Filter</span>(value = <span class="string">"hi"</span>, matchType = MatchType.STARTS_WITH)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">groupMsg</span><span class="params">(GroupMsg groupMsg, MsgSender sender)</span> </span>&#123;</span><br><span class="line">    	System.err.println(<span class="string">"接收测试"</span>);</span><br><span class="line">        sender.SENDER.sendGroupMsg(groupMsg, groupMsg.getMsgContent());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上内容，就已经可以创建出一个可以跑起来的项目的，具体拓展还是要参考SimBot的文档：<a href="https://www.yuque.com/simpler-robot/simpler-robot-doc/qeyorq" target="_blank" rel="noopener">https://www.yuque.com/simpler-robot/simpler-robot-doc/qeyorq</a>  ，里面有提供丰富的关于SimBot的内容，其中主体均为SimBot，组件为SimBot的拓展，需要SimBot在哪个聊天工具上跑选择对应组件去配置对应的POM依赖和修改对应的配置即可。</p>
<h2 id="关于SimBot在SpringBoot中搭建"><a href="#关于SimBot在SpringBoot中搭建" class="headerlink" title="关于SimBot在SpringBoot中搭建"></a>关于SimBot在SpringBoot中搭建</h2><p>SimBot在SpringBoot中搭建，前面的依赖、配置都需要更换，而且需要注意SimBot的日志冲突问题，加上后面整合到了SpringBoot中以后，会存在很多的依赖冲突、配置冲突问题，目前要整合上去需要重新再学习一边SimBot1文档，里面有些零零散散的描述。下一步的目标也是将该项目使用SpringBoot去整合。再搭建出一个完整的项目运行（springBoot实在太舒服了，没SpringBoot都感觉缺少了灵魂了）。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/03/09/%E5%85%B3%E4%BA%8ESimBot%E7%9A%84%E5%AD%A6%E4%B9%A0/" data-id="ckm3bxqhg0000hwu34ad9ag83" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-“VUE的学习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/30/%E2%80%9CVUE%E7%9A%84%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time datetime="2020-07-30T10:06:00.000Z" itemprop="datePublished">2020-07-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/30/%E2%80%9CVUE%E7%9A%84%E5%AD%A6%E4%B9%A0/">“VUE的学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Vue只负责视图层"><a href="#Vue只负责视图层" class="headerlink" title="Vue只负责视图层"></a>Vue只负责视图层</h1><p>  Soc：<br>   Html+CSS+JS:视图：只给用户看，刷新后台的数据</p>
<h2 id="前端框架"><a href="#前端框架" class="headerlink" title="前端框架"></a>前端框架</h2><p>   网络通信：axios<br>   页面跳转：bue-router<br>   状态管理：vuex<br>   Vue-UI：ICE</p>
<p>   虚拟DOM：利用内存<br>   计算机属性–》Vue特色</p>
<h2 id="关于前后端分离"><a href="#关于前后端分离" class="headerlink" title="关于前后端分离"></a>关于前后端分离</h2><p>  前端需要前端的框架，后端需要后端的框架。早期前后端没分离，前端程序员开发完Html丢后端套模板。实现了前后端分离，后端工程师只需要提供接口与前端对接即可，增加了开发效率。接口参考Swagger文章。前端可以脱离后端独立运行，就是前后端分离的具体表现。</p>
<p>  集大成者：MVVM+Dom</p>
<p>  大前端时代：后端：变轻松，但之后需要了解分布式，微服务，大数据。</p>
<h2 id="前端为主的MV-模式"><a href="#前端为主的MV-模式" class="headerlink" title="前端为主的MV*模式"></a>前端为主的MV*模式</h2><ul>
<li>MVC（同步通信为主）：model、View、Controller</li>
<li>MVP（异步通信为主）：Model、View、Presenter</li>
<li>MVVM (异步通信为主)：model、view、BiewModel</li>
</ul>
<h2 id="前后端分离的优点："><a href="#前后端分离的优点：" class="headerlink" title="前后端分离的优点："></a>前后端分离的优点：</h2><ul>
<li>前后端职责很清晰：前端工作在浏览器端，后端工作在服务端。清晰分工，可以让开发并行，测试数据的模拟不难，前端可以本地开发。后端则可以专注于业务逻辑处理，输出RESful等接口</li>
<li>前端开发的复杂度可控：前端代码很重，但合理分层，让前端代码能各司其职</li>
<li>部署相对独立：可快速改进产品体验</li>
</ul>
<h2 id="前后端分离的缺点："><a href="#前后端分离的缺点：" class="headerlink" title="前后端分离的缺点："></a>前后端分离的缺点：</h2><ul>
<li>代码不能复用，比如后端开发依旧需要对数据做各种校验，校验逻辑无法复用浏览器端代码。如果可以复用，那么后端的数据校验可以相对简单化。</li>
<li>全异步，对SEO（搜索引擎优化）不利，往往需要服务端做同步渲染的降低方案。</li>
<li>性能并非最佳，特别是移动互联网环境下。</li>
<li>SPA不能满足左右需求，依旧存在大量多页面应用。URL Design需要后端配合，前端无法完全掌控。</li>
</ul>
<h2 id="NodeJS带来的全栈时代"><a href="#NodeJS带来的全栈时代" class="headerlink" title="NodeJS带来的全栈时代"></a>NodeJS带来的全栈时代</h2><p>  前端为主的MV*模式解决了很多问题，但是还是存在不足。随着NodeJS的兴起，JavaScript开始有能力运行在服务端，这意味着可以有一种新的研发模式</p>
<p>  基于NodeJS的全栈模块还是有很多问题</p>
<ul>
<li>需要前端对服务编程有更进一步的认识。比如TCP/IP协议等网络知识。</li>
<li>NNodeJS层与Java层的高效通信。NodeJS模式下，都在服务端，RESful HTTP通信未必高效</li>
<li>对部署，运维层面的熟练了解，需要更多的只是和实操经验</li>
<li>大量的历史遗留问题如何过渡，这是最大的问题。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>  模式、技术没有好坏之分，只有适合不适合，前后端分离的开发思想主要是基于Soc，上面的种种模式，都是让前后端的职责更清晰，分工更合理高效。</p>
<h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><p>  一套用于构建用户界面的渐进式框架，发布于2014年2月。与启发大型框架不同的是，Vue被设计为可以自底向上逐层应用。核心库只关注视图层，易于上手且便于与第三方库（vue-roter，bue-resource，vuex）或既有项目整合。<br>  Vue是MVVM模式的实现者</p>
<h2 id="MVVM模式"><a href="#MVVM模式" class="headerlink" title="MVVM模式"></a>MVVM模式</h2><ul>
<li><p>model： 模型层，表示JavaScript对象</p>
</li>
<li><p>View：视图层，这里表示Dom（Html操作的元素）、</p>
</li>
<li><p>ViewModel:连接属兔和数据的中间件，Vue.js就是MVVM中的该层实现者</p>
<p>在MVVM架构中，是不允许数据和视图直接通信的，只能通过ViewModel来通信，而ViewModel就是定义了一个Observer观察者</p>
</li>
<li><p>ViewModel能够观察到数据的变化，并对视图对应的内容进行更新</p>
</li>
<li><p>ViewModel能够监听到视图的变化，并且通知数据发生改变<br>核心就是实现了DOM监听与数据绑定</p>
</li>
</ul>
<h2 id="为什么要用Vue-js"><a href="#为什么要用Vue-js" class="headerlink" title="为什么要用Vue.js"></a>为什么要用Vue.js</h2><ul>
<li>轻量级，体积小，压缩后只有20多KB</li>
<li>移动优先。更适合移动端，比如移动端的Touch事件</li>
<li>易上手，学习曲线平稳，文档整齐</li>
<li>吸取了Angular（模块化）和React（虚拟DOM）的长处，拥有自己独特的功能</li>
<li>开源</li>
</ul>
<h2 id="为什么要用MVVM"><a href="#为什么要用MVVM" class="headerlink" title="为什么要用MVVM"></a>为什么要用MVVM</h2><p>MVVM模式和MVC模式一样，主要目的是分离视图和模型，以下为好处</p>
<ul>
<li>低耦合：视图课独立于Model变化和修改，一个ViewModel可以绑定到不同的View上，当View变化的时候Model可以不变，当Model变化的时候，View也可以不变</li>
<li>可复用：你可以把一些视图逻辑放在一个ViewModel里面，让很多的View重复这段视图逻辑</li>
<li>独立开发：开发人员可以专注于业务逻辑和数据的开发，设计人员可以专注于页面设计</li>
<li>可测试：界面素来是比较难测试的，而现在测试可以针对ViewModel来写</li>
</ul>
<h2 id="VUE常用7个属性"><a href="#VUE常用7个属性" class="headerlink" title="VUE常用7个属性"></a>VUE常用7个属性</h2><p><a href="https://www.cnblogs.com/bgwhite/p/9297221.html" target="_blank" rel="noopener">https://www.cnblogs.com/bgwhite/p/9297221.html</a></p>
<h2 id="为什么要用Axios"><a href="#为什么要用Axios" class="headerlink" title="为什么要用Axios"></a>为什么要用Axios</h2><p>  由于Vue.js是一个视图层框架，严格遵守SoC，所以不包含AJAX的通信功能，为了解决该问题，作者单独开发了一个名为vue-resource的插件，过过2.0版本后停止了该插件的维护，并推出了Axios框架，少用jQuery，因为它操作Dom太频繁！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/30/%E2%80%9CVUE%E7%9A%84%E5%AD%A6%E4%B9%A0/" data-id="ckd8musiq0000msu3di0a4q1p" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-swagger的学习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/26/swagger%E7%9A%84%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time datetime="2020-07-26T07:49:28.000Z" itemprop="datePublished">2020-07-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/26/swagger%E7%9A%84%E5%AD%A6%E4%B9%A0/">swagger的学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul>
<li>号称世界上最流行的API框架</li>
<li>Restful Api文档在线生成器=》API文档与API定义同步更新</li>
<li>直接运行，在线测试API</li>
<li>支持多种语言</li>
<li>官网：<a href="https://swagger.io/" target="_blank" rel="noopener">https://swagger.io/</a></li>
</ul>
<h3 id="springboot集成"><a href="#springboot集成" class="headerlink" title="springboot集成"></a>springboot集成</h3><p>加入依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- https:&#x2F;&#x2F;mvnrepository.com&#x2F;artifact&#x2F;io.springfox&#x2F;springfox-swagger2 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;io.springfox&lt;&#x2F;groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;springfox-swagger2&lt;&#x2F;artifactId&gt;</span><br><span class="line">   &lt;version&gt;2.9.2&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;!-- https:&#x2F;&#x2F;mvnrepository.com&#x2F;artifact&#x2F;io.springfox&#x2F;springfox-swagger-ui --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;io.springfox&lt;&#x2F;groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;springfox-swagger-ui&lt;&#x2F;artifactId&gt;</span><br><span class="line">   &lt;version&gt;2.9.2&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p>配置类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2<span class="comment">// 开启Swagger2的自动配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>访问测试 ：<a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8080/swagger-ui.html</a> ，可以看到swagger的界面；</p>
<h3 id="配置Swagger"><a href="#配置Swagger" class="headerlink" title="配置Swagger"></a>配置Swagger</h3><p>1、Swagger实例Bean是Docket，所以通过配置Docket实例来配置Swaggger。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">//配置docket以配置Swagger具体参数</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Docket <span class="title">docket</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、通过apiInfo()属性配置文档信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置文档信息</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">   Contact contact = <span class="keyword">new</span> Contact(<span class="string">"联系人名字"</span>, <span class="string">"http://xxx.xxx.com/联系人访问链接"</span>, <span class="string">"联系人邮箱"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ApiInfo(</span><br><span class="line">           <span class="string">"Swagger学习"</span>, <span class="comment">// 标题</span></span><br><span class="line">           <span class="string">"学习演示如何配置Swagger"</span>, <span class="comment">// 描述</span></span><br><span class="line">           <span class="string">"v1.0"</span>, <span class="comment">// 版本</span></span><br><span class="line">           <span class="string">"http://terms.service.url/组织链接"</span>, <span class="comment">// 组织链接</span></span><br><span class="line">           contact, <span class="comment">// 联系人信息</span></span><br><span class="line">           <span class="string">"Apach 2.0 许可"</span>, <span class="comment">// 许可</span></span><br><span class="line">           <span class="string">"许可链接"</span>, <span class="comment">// 许可连接</span></span><br><span class="line">           <span class="keyword">new</span> ArrayList&lt;&gt;()<span class="comment">// 扩展</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、Docket 实例关联上 apiInfo()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Docket <span class="title">docket</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2).apiInfo(apiInfo());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、重启项目，访问测试 <a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8080/swagger-ui.html</a>  看下效果；</p>
<h3 id="配置扫描接口"><a href="#配置扫描接口" class="headerlink" title="配置扫描接口"></a>配置扫描接口</h3><p>1、构建Docket时通过select()方法配置怎么扫描接口。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Docket <span class="title">docket</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">      .apiInfo(apiInfo())</span><br><span class="line">      .select()<span class="comment">// 通过.select()方法，去配置扫描接口,RequestHandlerSelectors配置如何扫描接口</span></span><br><span class="line">      .apis(RequestHandlerSelectors.basePackage(<span class="string">"com.kuang.swagger.controller"</span>))</span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、重启项目测试，由于我们配置根据包的路径扫描接口，所以我们只能看到一个类</p>
<p>3、除了通过包路径配置扫描接口外，还可以通过配置其他方式扫描接口，这里注释一下所有的配置方式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">any() <span class="comment">// 扫描所有，项目中的所有接口都会被扫描到</span></span><br><span class="line">none() <span class="comment">// 不扫描接口</span></span><br><span class="line"><span class="comment">// 通过方法上的注解扫描，如withMethodAnnotation(GetMapping.class)只扫描get请求</span></span><br><span class="line">withMethodAnnotation(<span class="keyword">final</span> Class&lt;? extends Annotation&gt; annotation)</span><br><span class="line"><span class="comment">// 通过类上的注解扫描，如.withClassAnnotation(Controller.class)只扫描有controller注解的类中的接口</span></span><br><span class="line">withClassAnnotation(<span class="keyword">final</span> Class&lt;? extends Annotation&gt; annotation)</span><br><span class="line">basePackage(<span class="keyword">final</span> String basePackage) <span class="comment">// 根据包路径扫描接口</span></span><br></pre></td></tr></table></figure>

<p>4、除此之外，我们还可以配置接口扫描过滤：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Docket <span class="title">docket</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">      .apiInfo(apiInfo())</span><br><span class="line">      .select()<span class="comment">// 通过.select()方法，去配置扫描接口,RequestHandlerSelectors配置如何扫描接口</span></span><br><span class="line">      .apis(RequestHandlerSelectors.basePackage(<span class="string">"com.kuang.swagger.controller"</span>))</span><br><span class="line">       <span class="comment">// 配置如何通过path过滤,即这里只扫描请求以/kuang开头的接口</span></span><br><span class="line">      .paths(PathSelectors.ant(<span class="string">"/kuang/**"</span>))</span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5、这里的可选值还有</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">any() <span class="comment">// 任何请求都扫描</span></span><br><span class="line">none() <span class="comment">// 任何请求都不扫描</span></span><br><span class="line">regex(<span class="keyword">final</span> String pathRegex) <span class="comment">// 通过正则表达式控制</span></span><br><span class="line">ant(<span class="keyword">final</span> String antPattern) <span class="comment">// 通过ant()控制</span></span><br></pre></td></tr></table></figure>

<h3 id="配置Swagger开关"><a href="#配置Swagger开关" class="headerlink" title="配置Swagger开关"></a>配置Swagger开关</h3><h1 id="未完，先学习vue，后期再接着整理"><a href="#未完，先学习vue，后期再接着整理" class="headerlink" title="未完，先学习vue，后期再接着整理"></a>未完，先学习vue，后期再接着整理</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/26/swagger%E7%9A%84%E5%AD%A6%E4%B9%A0/" data-id="ckd4kpm4e00015su398sxcaf6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-MyBatisPlus复习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/20/MyBatisPlus%E5%A4%8D%E4%B9%A0/" class="article-date">
  <time datetime="2020-07-20T14:32:57.000Z" itemprop="datePublished">2020-07-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/20/MyBatisPlus%E5%A4%8D%E4%B9%A0/">MyBatisplus复习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="MyBatis是简化数据库操作的一个框架，Plus则是增强版"><a href="#MyBatis是简化数据库操作的一个框架，Plus则是增强版" class="headerlink" title="MyBatis是简化数据库操作的一个框架，Plus则是增强版"></a>MyBatis是简化数据库操作的一个框架，Plus则是增强版</h1><p>官网：<a href="https://mp.baomidou.com/" target="_blank" rel="noopener">https://mp.baomidou.com/</a> MyBatis Plus，简化 MyBatis ！</p>
<h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ul>
<li>无入侵</li>
<li>损耗小</li>
<li>强大的CRUD操作</li>
<li>支持Lambda形式调用</li>
<li>支持主键自动生成</li>
<li>支持 ActiveRecord 模式</li>
<li>支持自定义全局通用</li>
<li>内置代码生成器</li>
<li>内置分页插件</li>
<li>分页插件支持多种数据库</li>
<li>内置性能分析插件</li>
<li>内置全局拦截插件</li>
<li>使用该框架，Mybatisplus可以照样使用Mypatis的操作</li>
</ul>
<h3 id="入门的操作"><a href="#入门的操作" class="headerlink" title="入门的操作"></a>入门的操作</h3><ul>
<li>导入依赖</li>
<li>配置</li>
<li>编写代码 </li>
</ul>
<h3 id="主键生成策略"><a href="#主键生成策略" class="headerlink" title="主键生成策略"></a>主键生成策略</h3><p> 雪花算法：snowﬂake是Twitter开源的分布式ID生成算法，结果是一个long型的ID。其核心思想是：使用41bit作为 毫秒数，10bit作为机器的ID（5个bit是数据中心，5个bit的机器ID），12bit作为毫秒内的流水号（意味 着每个节点在每毫秒可以产生 4096 个 ID），后还有一个符号位，永远是0。可以保证几乎全球唯 一！</p>
<h3 id="自动填充"><a href="#自动填充" class="headerlink" title="自动填充"></a>自动填充</h3><p>  创建时间、修改时间！这些个操作一遍都是自动化完成的，我们不希望手动更新！<br>阿里巴巴开发手册：所有的数据库表：gmt_create、gmt_modiﬁed几乎所有的表都要配置上！而且需 要自动化</p>
<p>操作：<br>在对应的字段上添加注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字段添加填充内容</span></span><br><span class="line"><span class="meta">@TableField</span>(fill = FieldFill.INSERT) </span><br><span class="line"><span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@TableField</span>(fill = FieldFill.INSERT_UPDATE) </span><br><span class="line"><span class="keyword">private</span> Date updateTime;</span><br></pre></td></tr></table></figure>

<p>编写处理器来处理这个注解即可！</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j </span><br><span class="line"><span class="meta">@Component</span> <span class="comment">// 一定不要忘记把处理器加到IOC容器中！</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 插入时的填充策略</span></span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">           log.info(<span class="string">"start insert fill....."</span>);</span><br><span class="line">     <span class="keyword">this</span>.setFieldValByName(<span class="string">"createTime"</span>,<span class="keyword">new</span> Date(),metaObject); </span><br><span class="line">     <span class="keyword">this</span>.setFieldValByName(<span class="string">"updateTime"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新时的填充策略</span></span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123; </span><br><span class="line">            log.info(<span class="string">"start update fill....."</span>);</span><br><span class="line">             <span class="keyword">this</span>.setFieldValByName(<span class="string">"updateTime"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">      &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<h3 id="乐观锁"><a href="#乐观锁" class="headerlink" title="乐观锁"></a>乐观锁</h3><ul>
<li>乐观锁：它总是认为不会出问题，无论干什么都不去上锁，如果出现问题再次更新值测试</li>
<li>悲观锁：它总认为会出现问题，不管什么操作都是先上锁再操作</li>
</ul>
<p>乐观锁实现方式：</p>
<ul>
<li>取出记录时，获取当前 version </li>
<li>更新时，带上这个version </li>
<li>执行更新时， set version = newVersion where version = oldVersion </li>
<li>如果version不对，就更新失败</li>
</ul>
<h3 id="条件构造器"><a href="#条件构造器" class="headerlink" title="条件构造器"></a>条件构造器</h3><p>wapper  复杂的Sql就可以用它来代替</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//查询名字是测试1的数据</span></span><br><span class="line">	 QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">	wapper.ea（“name”，“测试<span class="number">1</span>”）;</span><br><span class="line">	User user = userMapper.selectOne(wrapper)</span><br><span class="line">	 System.out.println(user); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/20/MyBatisPlus%E5%A4%8D%E4%B9%A0/" data-id="ckd4kpm3y00005su3dpuz78et" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-MySQL的复习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/18/MySQL%E7%9A%84%E5%A4%8D%E4%B9%A0/" class="article-date">
  <time datetime="2020-07-18T01:58:14.734Z" itemprop="datePublished">2020-07-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/18/MySQL%E7%9A%84%E5%A4%8D%E4%B9%A0/">MySQL的复习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<p>title: Mysql复习与学习<br>date: 2020-07-18 09:58:14<br>tags:</p>
<hr>
<h1 id="数据库分类"><a href="#数据库分类" class="headerlink" title="数据库分类"></a>数据库分类</h1><h3 id="关系类型数据库"><a href="#关系类型数据库" class="headerlink" title="关系类型数据库"></a>关系类型数据库</h3><ul>
<li>通过表和表之间，行和列之间的关系进行数据的存储</li>
<li>常见的MySQL、Oracle、DB2</li>
</ul>
<h3 id="非关系型数据库"><a href="#非关系型数据库" class="headerlink" title="非关系型数据库"></a>非关系型数据库</h3><ul>
<li>非关系型型数据库，对象存储，通过对象自身的属性来决定。</li>
<li>常见的有Redis、MongDB</li>
</ul>
<h1 id="DBMS（数据管理系统）"><a href="#DBMS（数据管理系统）" class="headerlink" title="DBMS（数据管理系统）"></a>DBMS（数据管理系统）</h1><ul>
<li>数据库管理软件，科学有效的管理数据、维护和获取数据；</li>
<li>Mysql，数据库管理系统</li>
<li>5.7版本属于比较稳定版本</li>
<li>8.0版本驱动与5.7不一样，所以有时候需要配置一些不同的配置</li>
</ul>
<h1 id="SQL语句"><a href="#SQL语句" class="headerlink" title="SQL语句"></a>SQL语句</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">当表名或者字段名是一个特殊字符或者是关键字，就需要``，例如user</span><br><span class="line"></span><br><span class="line">数据库相关的SQL</span><br><span class="line">	<span class="keyword">SHOW</span> <span class="keyword">DATABASES</span>;		<span class="comment">--查看所有数据库</span></span><br><span class="line">	<span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> shool;	<span class="comment">--创建shool数据库，shool是数据库名</span></span><br><span class="line">	<span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> shool	<span class="comment">--查看shool数据库详情</span></span><br><span class="line">	<span class="keyword">DROP</span> <span class="keyword">DATABASE</span> shool;	<span class="comment">--删除shool数据库</span></span><br><span class="line">	SOURCE 路径；  <span class="comment">--导入sql</span></span><br><span class="line">	<span class="keyword">USE</span> shool;	<span class="comment">--使用shool数据库</span></span><br><span class="line"></span><br><span class="line">表相关的</span><br><span class="line">	<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t1 (<span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">255</span>),age <span class="built_in">INT</span>) <span class="keyword">CHARSET</span>=UTF8;	<span class="comment">--创建表</span></span><br><span class="line">	<span class="keyword">SHOW</span> <span class="keyword">TABLES</span>;	<span class="comment">--展示所有表</span></span><br><span class="line">	<span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLES</span> t1;	<span class="comment">--查看t1表详情</span></span><br><span class="line">	DESC t1;	<span class="comment">--查看t1表字段</span></span><br><span class="line">	<span class="keyword">DROP</span> <span class="keyword">TABLE</span> t1;	<span class="comment">--删除t1表</span></span><br><span class="line">	<span class="keyword">RENAME</span> <span class="keyword">TABLE</span> t1 <span class="keyword">TO</span> t2;	<span class="comment">--将t1表改名为t2表</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t1 <span class="keyword">ADD</span> <span class="keyword">id</span> <span class="built_in">INT</span>;	<span class="comment">--添加字段id到表t1的最后面</span></span><br><span class="line">	<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t1 <span class="keyword">ADD</span> <span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">FIRST</span>;	<span class="comment">--添加id字段到t1表的最前面 </span></span><br><span class="line">	<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t1 <span class="keyword">ADD</span> <span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">AFTER</span> <span class="keyword">name</span>;	<span class="comment">--添加id字段到name字段的后面</span></span><br><span class="line">	<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t1 <span class="keyword">DROP</span> <span class="keyword">id</span>;		<span class="comment">--删除t1表的id字段</span></span><br><span class="line">	<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t1 <span class="keyword">CHANGE</span> <span class="keyword">id</span> uid <span class="built_in">INT</span>;	<span class="comment">--将t1表表字段id修改成uid，注意新名后面记得跟新类型</span></span><br><span class="line">	<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t1 <span class="keyword">MODIFY</span> <span class="keyword">id</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>); <span class="comment">--修改约束</span></span><br></pre></td></tr></table></figure>
<h1 id="数据库的列类型"><a href="#数据库的列类型" class="headerlink" title="数据库的列类型"></a>数据库的列类型</h1><h3 id="数值"><a href="#数值" class="headerlink" title="数值"></a>数值</h3><ul>
<li>tinyint  十分小的数据   1个字节</li>
<li>smallint  较小的数据    2个字节</li>
<li>mediumint 中等大小的数据 3个字节</li>
<li>int       标准的整数      4个字节  常用的</li>
<li>bigint    较大的数据     8个字节</li>
<li>float     浮点数         4个字节</li>
<li>double    浮点数         8个字节（精度问题）、</li>
<li>decimal   字符串形式的浮点数 金融计算一般使用该数据类型，在JAVA中也有对应的类</li>
</ul>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><ul>
<li>char      字符串固定大小的  0-255</li>
<li>varchar   可变字符串        0-65535     常用的，对应JAVA中的String</li>
<li>tinytext  微型文本          2^8-1</li>
<li>text      文本串            2^16-1    保存大文本，例如博客文章之类的</li>
</ul>
<h3 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h3><ul>
<li>date      YYYY-MM-DD  日期格式</li>
<li>time      HH: mm: ss  时间格式</li>
<li>datetime  YYYY-MM-DD HH: mm: ss 最常用的时间格式   最常用的</li>
<li>timestamp 时间戳，  1970.1.1到现在的毫秒数   也是常用的</li>
<li>year      年份代表</li>
</ul>
<h3 id="null"><a href="#null" class="headerlink" title="null"></a>null</h3><ul>
<li>没有值，未知</li>
<li>注意不要使用null进行计算，结果为null</li>
</ul>
<h1 id="数据库的字段属性（重点）"><a href="#数据库的字段属性（重点）" class="headerlink" title="数据库的字段属性（重点）"></a>数据库的字段属性（重点）</h1><p> Unsigned：</p>
<ul>
<li>无符号的整数</li>
<li>声明了该列表不能为负数</li>
</ul>
<p>zerfill：</p>
<ul>
<li>0填充的</li>
<li>不足的位数用0来填充，  例如： int（3）  5会变成005</li>
</ul>
<p>自增</p>
<ul>
<li>通常理解为自增，自动在上一条记录的基础上+1（默认，这是可修改的）</li>
<li>通常用来设计唯一的主键 index ，但必须是整数类型</li>
</ul>
<p>非空</p>
<ul>
<li>设置为not null，如果不给他赋值，他就会报错</li>
<li>NULL  如果不填写值，默认就是null！</li>
</ul>
<p>默认：</p>
<ul>
<li>设置默认的值！</li>
<li>sex，默认设置为男，如果不指定该列的值，就会有默认的值！</li>
</ul>
<p><strong>数据库必须要有的字段</strong><br>1、id 主键<br>2、version 乐观锁<br>3、id_delete 伪删除<br>4、gmt_create 创建时间<br>5、gmt_update 修改时间</p>
<p>每个表必须会有这五个字段，表示一个记录的存在意义</p>
<h1 id="建立字段的表的格式"><a href="#建立字段的表的格式" class="headerlink" title="建立字段的表的格式"></a>建立字段的表的格式</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_user (</span><br><span class="line">  uid <span class="built_in">INT</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'用户id'</span>,</span><br><span class="line">  username <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span> <span class="keyword">COMMENT</span> <span class="string">'用户名'</span>,</span><br><span class="line">  <span class="keyword">password</span> <span class="built_in">CHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'密码'</span>,</span><br><span class="line">  <span class="keyword">salt</span> <span class="built_in">CHAR</span>(<span class="number">36</span>) <span class="keyword">COMMENT</span> <span class="string">'盐值'</span>,</span><br><span class="line">  phone <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">COMMENT</span> <span class="string">'手机号码'</span>,</span><br><span class="line">  email <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">COMMENT</span> <span class="string">'电子邮箱'</span>,</span><br><span class="line">  gender <span class="built_in">INT</span>(<span class="number">1</span>) <span class="keyword">COMMENT</span> <span class="string">'性别：0-女，1-男'</span>,</span><br><span class="line">  avatar <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">COMMENT</span> <span class="string">'头像'</span>,</span><br><span class="line">  is_delete <span class="built_in">INT</span>(<span class="number">1</span>) <span class="keyword">COMMENT</span> <span class="string">'是否标记为删除，0-未删除，1-已删除'</span>,</span><br><span class="line">  created_user <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">COMMENT</span> <span class="string">'创建人'</span>,</span><br><span class="line">  created_time DATETIME <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  modified_user <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">COMMENT</span> <span class="string">'最后修改人'</span>,</span><br><span class="line">  modified_time DATETIME <span class="keyword">COMMENT</span> <span class="string">'最后修改时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (uid)</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4;</span><br></pre></td></tr></table></figure>
<p>格式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名（</span><br><span class="line">字段名 列类型 属性 索引 注释，</span><br><span class="line">字段名 列类型 属性 索引 注释，</span><br><span class="line">......</span><br><span class="line">字段名 列类型 属性 索引 注释，</span><br><span class="line">设置主键</span><br><span class="line">）设置引擎 设置字符集</span><br><span class="line"></span><br><span class="line"> <span class="keyword">password</span>【字段名】 <span class="built_in">CHAR</span>(<span class="number">32</span>)【列类型】 <span class="keyword">NOT</span> <span class="literal">NULL</span>【属性】 <span class="keyword">COMMENT</span> <span class="string">'密码'</span>【注释】, </span><br><span class="line"> <span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span>【引擎】 <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4【字符集】;</span><br></pre></td></tr></table></figure>
<h1 id="数据库引擎"><a href="#数据库引擎" class="headerlink" title="数据库引擎"></a>数据库引擎</h1><ul>
<li>INNODB 默认使用</li>
<li>MYISAM 早期使用<br>常规使用操作：</li>
<li>MYISAM 节约空间，速度快</li>
<li>INNODB 安全性高，支持事务的处理，由于支持外键，可以多表多用户操作</li>
</ul>
<h3 id="在物理空间存在的位置"><a href="#在物理空间存在的位置" class="headerlink" title="在物理空间存在的位置"></a>在物理空间存在的位置</h3><p>所有的数据库文件都存在data目录下<br>本质还是文件的存储！<br>Mysql 引擎在物理文件上的区别</p>
<ul>
<li>INNODB在数据库表中只有一个*.frm文件，以及上级目录下的ibdata1文件</li>
<li>MYISAM对应文件:<br>1、<em>.frm  表结构的定义文件<br>2、</em>.MYD   数据文件（data）<br>3、*.MYI  索引文件（index）      </li>
</ul>
<h1 id="Mysql-数据库管理"><a href="#Mysql-数据库管理" class="headerlink" title="Mysql 数据库管理"></a>Mysql 数据库管理</h1><h3 id="外键（了解即可）"><a href="#外键（了解即可）" class="headerlink" title="外键（了解即可）"></a>外键（了解即可）</h3><p>删除有外键关系表的时候，必须先删除引用别人的表（从表），在删除被引用的表（主表）<br>链接：<a href="https://pan.baidu.com/s/1rQiDEy2N4T-bmxsflQNPAQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1rQiDEy2N4T-bmxsflQNPAQ</a><br>提取码：1458</p>
<p>以上是物理级别的外键，不建议使用，了解即可</p>
<p>逻辑外键这是常见的，数据库值单纯的存表、数据即可，想要用外键，在JAVA代码中通过代码实现</p>
<h3 id="DML语言（既增删改）"><a href="#DML语言（既增删改）" class="headerlink" title="DML语言（既增删改）"></a>DML语言（既增删改）</h3><p>数据库意义：数据存储、数据管理<br>DML语言：数据操作语言</p>
<ul>
<li>insert</li>
<li>update</li>
<li>delete</li>
</ul>
<h3 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> T1(<span class="keyword">name</span>,age) <span class="keyword">values</span>(<span class="string">'Lilei'</span>,<span class="number">18</span>),(<span class="string">'Hanmeimei'</span>,<span class="number">19</span>);</span><br><span class="line">批量插入格式: <span class="keyword">insert</span> <span class="keyword">into</span> 表名(字段<span class="number">1</span>，字段<span class="number">2</span>) <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>),(值<span class="number">1</span>,值<span class="number">2</span>),(值<span class="number">1</span>,值<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>注意事项：<br>  1、字段与字段之间用 英文逗号 隔开<br>  2、字段可以省略，但是后面的值必须要一一对应，不能少<br>  3、插入多条数据，VALUES 后面的值要适应 英文逗号 隔开即可</p>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><p>update 表名 set xxx=xxx where 条件;<br>update 表名 set name=’是鸽鲨手’,age=23 WHERE id = 1;<br>第一句更改单个值，第二个更改多个值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> person <span class="keyword">SET</span> age=<span class="number">30</span> <span class="keyword">WHERE</span> <span class="keyword">name</span>=<span class="string">'Jerry'</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> person <span class="keyword">SET</span> age=<span class="number">20</span> <span class="keyword">WHERE</span> age <span class="keyword">is</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<p>关于区间查询进行修改操作：<br>链接：<a href="https://pan.baidu.com/s/17iXmpuRmebheOPU9K6A7Dg" target="_blank" rel="noopener">https://pan.baidu.com/s/17iXmpuRmebheOPU9K6A7Dg</a><br>提取码：1458</p>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>delete from 表名 where 条件;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> person <span class="keyword">where</span> age=<span class="number">20</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> person <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'Tom'</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> person; 	<span class="comment">--避免这样这，这样会清空表</span></span><br></pre></td></tr></table></figure>
<p>TRUNCATE命令<br>作用：完全清空一个数据库表，表的结构和索引约束不会变<br>TRUNCATE 表名；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> t1;</span><br></pre></td></tr></table></figure>

<p>TRUNCATE与delete from person的区别</p>
<ul>
<li>相同点：都能删除数据，不会删除表结构</li>
<li>不同:TRUNCATE会重新设置，自增列计数器会归零，而且不影响事务</li>
</ul>
<p>了解即可：DELETE删除的问题，重启数据库，现象</p>
<ul>
<li>INNODB 自增列会重1开始（存在内存当中，断电即失）</li>
<li>MYISAM 继续从上一个自增量开始（存在文件中，不会丢失）</li>
</ul>
<h3 id="DQL查询数据（重点）"><a href="#DQL查询数据（重点）" class="headerlink" title="DQL查询数据（重点）"></a>DQL查询数据（重点）</h3><p>DQL（Date Query LANGUAGE:数据查询语言）</p>
<ul>
<li>所有的查询操作都用它 Select</li>
<li>简单的查询，复杂的查询它都能做</li>
<li>数据库中最核心的语言，最重要的语句</li>
<li>使用频率最高的语句</li>
</ul>
<h4 id="SELECT完整语法"><a href="#SELECT完整语法" class="headerlink" title="SELECT完整语法"></a>SELECT完整语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段</span><br><span class="line"><span class="keyword">FROM</span> 表</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span>     <span class="comment">--联合查询</span></span><br><span class="line"><span class="keyword">WHERE</span>         <span class="comment">--查询满足的条件</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span>      <span class="comment">--指定结果按照哪个字段分组</span></span><br><span class="line"><span class="keyword">HAVING</span>		  <span class="comment">--过滤分组的记录必须满足的次要条件</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span>	  <span class="comment">--指定查询记录按一个活多个条件排序</span></span><br><span class="line"><span class="keyword">LIMIT</span>		  <span class="comment">--指定查询记录从哪条到哪条（分页）</span></span><br></pre></td></tr></table></figure>

<p>指定查询字段:SELECT 字段 FROM 表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> person; 查询表中所有的数据</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> person; 查询所有的名字</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> person <span class="keyword">where</span> age&gt;<span class="number">50</span>; 查询年龄大于50岁的信息</span><br></pre></td></tr></table></figure>

<p>当列名不是见名知意，我们起别名 AS      （字段名 AS 别名）（表名 AS 别名）<br>效果：可以让列名或者表名查询出来后改变列或者表名，下面SQL查询出来，“student”字段会变成“学号”，”studentName“变成“学生姓名”。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student <span class="keyword">AS</span> 学号,studentName <span class="keyword">AS</span> 学生姓名 <span class="keyword">FROM</span> student <span class="keyword">AS</span> s;</span><br></pre></td></tr></table></figure>

<p>函数 CONCAT（a，b）<br>效果：下面SQL查询出来后，原本查询出来的字段只会出现学生名字（张三），添加会变成“姓名：+查询出来的studentName结果”（姓名：张三）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> COUNCAT(<span class="string">'姓名：'</span>,studentName) <span class="keyword">FROM</span> student;</span><br></pre></td></tr></table></figure>
<p>去重复 DISTINCT<br>效果：去除SELECT查询出来重复的结果，只显示一条</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="string">`studentno`</span> <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br></pre></td></tr></table></figure>

<p>计算符号<br>效果：直接对数据进行算术操作（+，-，*，/，%）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">'StudentResult'</span>+<span class="number">1</span> <span class="keyword">AS</span> 所有分数加一分 <span class="keyword">FROM</span> <span class="keyword">result</span></span><br></pre></td></tr></table></figure>

<p>数据库中的表达式：文本值，列，null，函数，计算书，系统变量…<br>格式：SELECT 表达式 FROM 表</p>
<p>###where条件子句<br>作用：检索条件中符合的值<br>搜索的条件由一个或者多个表达式组成，结果为布尔值<br>效果：查询学生成绩在95到100中间的学生</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">result</span> <span class="keyword">WHERE</span> StrudentResult <span class="keyword">BETWEEN</span> <span class="number">95</span> <span class="keyword">AND</span> <span class="number">100</span></span><br></pre></td></tr></table></figure>
<p>符号参考“修改”下面链接的图片内容<br>逻辑符号在这里尽量更换成对应的单词使用<br>链接：<a href="https://pan.baidu.com/s/1js3W5qYHb4a60WeSScL9mw" target="_blank" rel="noopener">https://pan.baidu.com/s/1js3W5qYHb4a60WeSScL9mw</a><br>提取码：1458</p>
<h3 id="连表查询-JOIN"><a href="#连表查询-JOIN" class="headerlink" title="连表查询 JOIN"></a>连表查询 JOIN</h3><p>做连表的思路：<br>1、分析需求，分析查询的字段来自哪些表，（连表查询）<br>2、确定使用7种链接的哪种<br>确定交叉点（两个表中哪个数据是相同的）<br>判断的条件：学生表中 studentNO=成绩表 studentNo</p>
<p>连接操作<br>INNER JOIN  如果表中至少有一个匹配，就返回行<br>LEFT JOIN   会从左表返回所有值，即使右表没有匹配<br>RIGHT JOIN  会从右表返回所有值</p>
<p>where和on的区别：where先连表后筛选，on先筛选后连表<br>模棱两可的字段记得选择是哪张表的字段</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,<span class="string">`studentresult`</span></span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">WHERE</span> s.studentno=r.studentno</span><br></pre></td></tr></table></figure>
<p>上面是两张表连查</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> studentNO,stuentName，SubjectName，StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentNo=s.studentNo</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> subject sub</span><br><span class="line"><span class="keyword">ON</span> r.SubjectNo=sub.SubjectNo</span><br></pre></td></tr></table></figure>
<p>上面三表连查</p>
<p>多表连查要点</p>
<ul>
<li>我要查询哪些数据 Select …</li>
<li>从哪些表查询 FROM 表 xxx JOIN 链接的表 ON 交叉条件</li>
<li>假设存在多张表查询，慢慢增加，先查询两张表，在查询第三张表、第四张表</li>
</ul>
<p>左链接以左表为基准，右连接以右表为基准<br>比如有一个学生数据没参加考试，用左查询查询也会将该学生查询出来（左边学生表右边考试成绩表），右查连接不会出现该学生</p>
<p>JOIN（连接的表）ON （判断条件）  连接查询<br>WHERE   等值查询</p>
<h3 id="自连接（难点、了解点、建表偷懒）"><a href="#自连接（难点、了解点、建表偷懒）" class="headerlink" title="自连接（难点、了解点、建表偷懒）"></a>自连接（难点、了解点、建表偷懒）</h3><p>将原来该分为两张表建立的数据（有主从关系的数据）建立在同一张表，建立了对应的主从ID，后期查询主从关系使用的<br>自己的表和自己的表连接，核心：一张表拆成两张一样的表（父栏目与子栏目）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.name <span class="keyword">AS</span> 父栏目,b.name <span class="keyword">AS</span> 子栏目</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">AS</span> a, <span class="keyword">user</span> <span class="keyword">AS</span> b</span><br><span class="line"><span class="keyword">WHERE</span> a.id=b.id</span><br></pre></td></tr></table></figure>

<h3 id="分页LIMIT与排序ORDER-BY"><a href="#分页LIMIT与排序ORDER-BY" class="headerlink" title="分页LIMIT与排序ORDER BY"></a>分页LIMIT与排序ORDER BY</h3><p>ORDER BY<br>分为升序（ASC）与降序排列（DESC）</p>
<p>分页<br>意义：缓解数据库压力、给人更好的体验  （相对于瀑布流 ‘百度查询图片出来的结果就是瀑布流’）</p>
<p>LIMIT 0,5     –从第1到第5的数据<br>0–起始的位置   5–页面的大小</p>
<p>网页应用翻页计算<br>第N页 LIMIT （n-1）*p,p</p>
<p>p：页面总大小<br>n：当前页数<br>（n-1）*p：起始值<br>数据总数/页面大小 = 总页数</p>
<p>子查询（开发慎用，会导致服务器因为查询运行变慢）<br>在where中嵌套一个查询语句</p>
<p>格式：<br>SELECT * FROM 表名 WHER  字段 in（select xxx from xxx）</p>
<h3 id="Mysql函数"><a href="#Mysql函数" class="headerlink" title="Mysql函数"></a>Mysql函数</h3><p>常用函数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--数学函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ABS</span>(<span class="number">-8</span>)  <span class="comment">--绝对值</span></span><br><span class="line"><span class="keyword">SELECT</span> CELLING(<span class="number">9.4</span>)  <span class="comment">--向上取整</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">FLOOR</span>(<span class="number">9.4</span>)    <span class="comment">--向下取整</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SIGN</span>(<span class="number">10</span>)		<span class="comment">--盘旋一个数的符号 正数返回1，负数返回-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--字符串函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span>(<span class="string">'内容'</span>)  <span class="comment">--字符串长度</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="string">'内容1'</span>,<span class="string">'内容2'</span>,<span class="string">'内容3'</span>)   <span class="comment">--拼接字符串</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>(<span class="string">'HELLOWORD'</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="string">'ABCD'</span>)   <span class="comment">--替换，从指定位置替换某个长度</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LOWER</span>(<span class="string">'ABCD'</span>)  <span class="comment">--转小写</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">UPPER</span>(<span class="string">'asd'</span>)	<span class="comment">--转大写</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSTR</span>(<span class="string">'HELLOWORD'</span>,<span class="string">'H'</span>)  <span class="comment">--查询第一次出现的位置</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">REPLACE</span>(<span class="string">'ABCDE'</span>,<span class="string">'BC'</span>,<span class="string">'AE'</span>)  <span class="comment">--替换字符串</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">REVERSE</span>(<span class="string">'ABCDE'</span>)	<span class="comment">--翻转字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--时间和日期函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CURRENT_DATE</span>() <span class="comment">--获取当前日期</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CURDATE</span>()  <span class="comment">--获取当前日期</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>()  <span class="comment">--获取当前的时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LOCALTIME</span>()  <span class="comment">--本地时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>()  <span class="comment">--系统时间</span></span><br></pre></td></tr></table></figure>
<p>聚合函数<br>COUNT()<br>SUM()<br>AVG()<br>MAX()<br>MIN()</p>
<h3 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h3><p>格式：<br>UPDATE 表名 SECT 字段名=MD5(字段名)</p>
<p>插入前加密<br>INSERT INTO 表名 VALUES(4,’字段1’,MD5(‘字段2’))</p>
<p>解密<br>SELECT * FROM 表名 WHERE 字段一=‘内容’ AND 字段二=MD5(‘内容’)</p>
<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p>要么都成功，要么都失败<br>mysql是自动开启事务自动提交的</p>
<p>事务原则ACID：原子性、一致性、隔离性、持久性</p>
<ul>
<li>原子性：这两个步骤一起成功、或者一起失败，不能只有其中之一发生一个动作</li>
<li>一致性：针对两个事务操作前后的状态一致性（最终一致性），事务前后的数据完整性要保证一致性</li>
<li>持久性：事务的结束后的数据不随着外界原因导致数据丢失（事务如果没提交，恢复到原状。只要提交了，就不可逆，持久化到数据库上）</li>
<li>隔离性：多个用户同时操作，排除其他事务对当前事务的影响</li>
</ul>
<p>隔离导致的问题：</p>
<ul>
<li>脏读：一个事务读取了另外一个事务未提交的数据</li>
<li>不可重复读：在一个事务内读取某一行数据，多次读取结果不同。（不一定是错误，看场合）</li>
<li>幻读：一个事务内读到了别的事务插入的数据，导致前后读取不一致</li>
</ul>
<p>流程图以及代码<br>链接：<a href="https://pan.baidu.com/s/1OugAtEQlMQ2z0LnMkd_kng" target="_blank" rel="noopener">https://pan.baidu.com/s/1OugAtEQlMQ2z0LnMkd_kng</a><br>提取码：1458</p>
<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p>MySQL官方对索引的定义：索引是帮助MySQL高效获取数据的数据结构。索引是数据结构。</p>
<p>索引的分类</p>
<ul>
<li>主键索引 （PRINARY KEY）<ul>
<li>唯一标识，不可重复，只能有一个列作为主键</li>
</ul>
</li>
<li>唯一索引  (UNIQUE KEY)<ul>
<li>避免重复的列出现，唯一索引可以重复，多个列都可以标识唯一索引</li>
</ul>
</li>
<li>常规索引  (KEY/INDEX)<ul>
<li>默认的，index，key关键字来设置</li>
</ul>
</li>
<li>全文索引  （FullText）<ul>
<li>在特定的数据库引擎下才有，MyISAM</li>
<li>快速定位数据</li>
</ul>
</li>
</ul>
<p>使用：<br>  1、在创建表的时候给字段增加索引<br>  2、创建完毕后，增加索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 显示索引</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> 表名</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加一个全文索引</span></span><br><span class="line"><span class="keyword">ALTER</span> TANLE 表名 <span class="keyword">ADD</span> FULLTEXT <span class="keyword">INDEX</span> 索引名（列名）</span><br><span class="line"><span class="keyword">ALTER</span> TANLE shool.student <span class="keyword">ADD</span> FULLTEXT <span class="keyword">INDEX</span> studentName(studentname);</span><br><span class="line"></span><br><span class="line"><span class="comment">--分析SQL执行的状况</span></span><br><span class="line"> <span class="keyword">EXPLAIN</span></span><br></pre></td></tr></table></figure>

<p>索引原则</p>
<ul>
<li>索引不是越多越好</li>
<li>不要对经常变动的数据加索引</li>
<li>不要对小数据量加索引</li>
<li>索引一般用再常用来查询的字段上</li>
</ul>
<p>索引的数据结构<br>Hash类型的索引<br>B+tree：InnoDB默认的索引</p>
<p>在不同场景下用这两个的速度不一样，Hash类型的索引使用了Hash散列算法，在单独寻找一条记录的时候会比较快，但是在范围查询没有B+tree快。</p>
<h1 id="数据库备份"><a href="#数据库备份" class="headerlink" title="数据库备份"></a>数据库备份</h1><p>为什么要备份：</p>
<ul>
<li>保证重要的数据不丢失</li>
<li>数据转移</li>
</ul>
<p>备份方式：</p>
<ul>
<li>直接拷贝物理文件</li>
<li>在可视化工具手动导出<ul>
<li>可视化工具直接选择数据库右键即可</li>
</ul>
</li>
<li>使用命令行导出 mysqldump<ul>
<li>记得配置好环境变量才可以在CMD中导出，具体命令百度</li>
</ul>
</li>
</ul>
<p>导入：<br>** 导入表记得到对应的数据库中导入，导入数据库的话只要登录状态就可以直接登录 **</p>
<ul>
<li>source d:/文件名.sql<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source d:/emp.sql;</span><br></pre></td></tr></table></figure>
<h1 id="权限管理和备份"><a href="#权限管理和备份" class="headerlink" title="权限管理和备份"></a>权限管理和备份</h1>用户管理<br>内容百度，这是关于对数据库操做的权限，用户能对已有的表进行多大限度的操作，这是可控制的。</li>
</ul>
<h1 id="数据库的三大规约：三大范式"><a href="#数据库的三大规约：三大范式" class="headerlink" title="数据库的三大规约：三大范式"></a>数据库的三大规约：三大范式</h1><p>** 设置数据库的意义：当数据库比较复杂的时候，我们就需要设计 **</p>
<p>糟糕的数据库设计：</p>
<ul>
<li>数据库冗余，浪费空间</li>
<li>数据库插入和删除都会麻烦、异常【屏蔽使用物理外键】</li>
<li>程序的性能差</li>
</ul>
<p>好的数据库</p>
<ul>
<li>节约空间</li>
<li>保证数据库的完整性</li>
<li>方便我们开发系统</li>
</ul>
<p>软件开发中关于数据库的设计：</p>
<ul>
<li>分析需求：分析业务需要处理的数据的需求</li>
<li>概要设计： 设计关系图E-R图</li>
</ul>
<p>为什么需要数据规范化</p>
<ul>
<li>信息重复</li>
<li>更新异常</li>
<li>插入异常<ul>
<li>无法正常显示信息</li>
</ul>
</li>
<li>删除异常<ul>
<li>丢失有效的信息</li>
</ul>
</li>
</ul>
<p>三大范式</p>
<ul>
<li>第一范式：要求数据库表的每一列是不可分割的原子数据项。保证原子性，减少歧义</li>
<li>第二范式：需要先满足第一范式。每张表只描述一件事情</li>
<li>第三范式：需要先满足前面两个范式。保证数据表中的每一列和主键都直接相关，不能间接相关。</li>
</ul>
<p>链接：<a href="https://pan.baidu.com/s/13cgFomc-aeXTGixd0_khBA" target="_blank" rel="noopener">https://pan.baidu.com/s/13cgFomc-aeXTGixd0_khBA</a><br>提取码：1458</p>
<p>规范性和性能性不可额兼得。<br>关联的查询表最好不超过3张表。</p>
<ul>
<li>考虑商业化的需求和目标（陈本，用户体验）  数据库的性能更加重要</li>
<li>在规范性能的问题的时候，需要适当考虑一下规范性！</li>
<li>故意给某些表增加一些冗余字段。（多表查询变成单表查询）</li>
<li>故意增加一些计算列（从大数据量降低为小数据量的查询：索引）</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/18/MySQL%E7%9A%84%E5%A4%8D%E4%B9%A0/" data-id="ckcrb4ops00001cu30bvh8y57" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-SpringBoot复习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/17/SpringBoot%E5%A4%8D%E4%B9%A0/" class="article-date">
  <time datetime="2020-07-17T10:57:24.000Z" itemprop="datePublished">2020-07-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/17/SpringBoot%E5%A4%8D%E4%B9%A0/">SpringBoot复习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="SpringBoot框架作用"><a href="#SpringBoot框架作用" class="headerlink" title="SpringBoot框架作用"></a>SpringBoot框架作用</h2><p>  它是一个已经完成绝大部分配置的SpringMVC框架，并且可以更简单的整合其他框架一起使用，甚至默认情况下已经集成了绝大部分通用的依赖。核心思想为“约定大于配置”，开发人员遵守相关的”约定“即可</p>
<h2 id="关于项目的创建"><a href="#关于项目的创建" class="headerlink" title="关于项目的创建"></a>关于项目的创建</h2><p>   通过 <a href="https://start.spring.io" target="_blank" rel="noopener">https://start.spring.io</a> 官网下载即可<br>   Group值为cn.tedu，Artifact值为sample，展开Options，将Packaging选择为war，确定无误后，点击下方的Generate按钮，将生成项目，并且开始自动下载。<br>   将下载得到的sample.zip解压，得到sample文件夹，该文件夹就是一个SpringBoot项目，先将该文件夹移动到Workspace中，便于管理项目。</p>
<h2 id="项目中添加静态资源"><a href="#项目中添加静态资源" class="headerlink" title="项目中添加静态资源"></a>项目中添加静态资源</h2><p>  静态资源：客户端可以直接访问的资源，例如.html、.css、.js、图片等。</p>
<p>  在SpringBoot项目中，在src/main/resources下有static文件夹，这个文件夹就是专门用于存放静态资源文件的，其作用相当于传统JavaEE项目中的webapp文件夹，但是，在SpringBoot项目中建议放在static中，在使用该文件夹时，还可以自行创建子级文件夹。</p>
<h2 id="关于MyBatis框架"><a href="#关于MyBatis框架" class="headerlink" title="关于MyBatis框架"></a>关于MyBatis框架</h2><p>  需要在项目中添加MyBatis的相关依赖，可以再下载时就添加，或者直接复制依赖。<br>  添加依赖后，启动项目时，就会自动读取连接数据库的配置信息，而当前并没有配置，所以，就会出现错误！则需要在application.properties文件中添加配置</p>
<pre><code class="XML">spring.datasource.url=jdbc:mysql://localhost:3306/tedu_ums?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=root
spring.datasource.password=root</code></pre>
<p>  当添加了以上配置后，其实，启动项目时，也只是读取以上配置，并不会执行连接数据库的操作，所以，即使配置信息有误，也不会提示错误，则需要通过单元测试，尝试连接数据库，才能知道配置信息及相关涉及的jar包文件是否正确！</p>
<ul>
<li><p>在SampleApplicationTests中添加连接数据库的测试方法：<br>``` JAVA<br>  @Autowired<br>  private DataSource dataSource;</p>
<p>  @Test<br>  public void getConnection() throws SQLException {</p>
<pre><code>System.err.println(dataSource.getConnection());</code></pre><p>  }</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/17/SpringBoot%E5%A4%8D%E4%B9%A0/" data-id="ckcq4we9t0000hwu34st0hxt0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-SpringCloud的第一天学习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/03/SpringCloud%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time datetime="2020-07-03T06:45:07.000Z" itemprop="datePublished">2020-07-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/03/SpringCloud%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9%E5%AD%A6%E4%B9%A0/">SpringCloud的第一天学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="分布式核心概念"><a href="#分布式核心概念" class="headerlink" title="分布式核心概念"></a>分布式核心概念</h2><p>远程调用技术<br>   服务消费者与服务提供者简历链接<br>   流行的技术：rpc  http协议（无论什么语言都支持http协议）</p>
<ul>
<li>rpc：主要目标是让远程服务调用更简单，更透明，屏蔽底层的传输方式，一般用TCP或者UDP，开发者咋子使用的时候只需要了解谁在什么位置提供什么样的远程服务接口即可<br>###RESTful与rpc对比：<ul>
<li>通信协议：RESTful使用HTTP，RPC一般使用TCP</li>
<li>性能：RESTful略低，RPC较高</li>
<li>灵活度：RESTful高，RPC较低</li>
</ul>
</li>
</ul>
<p>应用：RESTful用于微服务架构，PRC用于SOA架构</p>
<h2 id="分布式中的CAP原理"><a href="#分布式中的CAP原理" class="headerlink" title="分布式中的CAP原理"></a>分布式中的CAP原理</h2><p>衡量分布式系统架构是否符合要求的一个重要指导方式，通过C一致性（保证时时刻刻多节点间的数据一致）、A可用性（节点是否可以正常提供数据给客户端）、P分区容忍性（是否容忍不数据存放在不同的数据节点上）来衡量架构</p>
<ul>
<li>C一致性：保持服务可用，通过多节点解决</li>
<li>A可用性:多节点数据一致性<ul>
<li>P分区容忍性：是否可以将数据存放到多个地方</li>
</ul>
</li>
</ul>
<p>一个系统中不可能同时满足C.A.P，衡量一般都是拿其中两项：ac，ap，cp，一般看具体应用，较多的用ap</p>
<ul>
<li>ac：考量一致性和可用性，物理数据库用的比较多</li>
<li>ap：短暂允许数据不一致，NOsql数据库</li>
<li>cp：zookeeper</li>
</ul>
<h2 id="常见的微服务框架"><a href="#常见的微服务框架" class="headerlink" title="常见的微服务框架"></a>常见的微服务框架</h2><p>  Spring Cloud、ServiceComb、ZeroC ICE</p>
<h2 id="Springcloud"><a href="#Springcloud" class="headerlink" title="Springcloud"></a>Springcloud</h2><p>  Spring Cloud：利用了Spring Boot的开发便利性，简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，可以使用Spring Boot的开发风格做到一键部署与启动，不需要重复造轮子<br>  SpringCloud的架构：</p>
<p>  <strong>A、核心组件</strong></p>
<p> 1、Netfix组件</p>
<ul>
<li><p>Eureka：服务注册中心</p>
<ul>
<li>Ribbon：客服端负载均衡</li>
<li>Feign：声明式服务调用</li>
<li>Hystrix：客户端容错保护</li>
<li>Zuul：API服务网关<br>2、Alibaba组件</li>
</ul>
</li>
<li><p>Nacos：服务注册中心</p>
<ul>
<li>Sentinel：客户端容错保护</li>
</ul>
<p>3、原生及其他组件</p>
<ul>
<li>Consul：服务注册中心</li>
</ul>
</li>
<li><p>Config：分布式配置中心</p>
</li>
<li><p>Gateway：API服务网关</p>
</li>
<li><p>Sleuth/Zipkin：分布式链路追踪</p>
<p>服务注册中心：负责服务的注册与发现，很好的将服务连接起来<br>断路器：负责监控服务之间的调用情况，连续多次失败进行熔断保护。</p>
<pre><code>API网关：负责转发所有对外的请求和服务
配置中心：提供了同意的配置信息管理服务，可以实时的通知各个服务火气最新的配置信息</code></pre></li>
</ul>
<h2 id="RestTemplate"><a href="#RestTemplate" class="headerlink" title="RestTemplate"></a>RestTemplate</h2><p>  Spring框架提供的类，可用于应用中调用rest服务，简化了http服务之间的通信方式，同意了RESTful标准，封装了http链接，我们只需要传入url以及返回值即可<br>  该类的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">GET：getForObject（String,Class&lt;T&gt;,Object....）</span><br><span class="line">getForEntity（String,Class&lt;T&gt;,Object....）</span><br><span class="line"></span><br><span class="line">POST:postForlocation(String,Object,Class&lt;T&gt;,Object....)</span><br><span class="line">	   postForObject(String,Object,Class&lt;T&gt;,Object....)</span><br><span class="line"></span><br><span class="line">PUT:put(String,Object,Object....)</span><br><span class="line"></span><br><span class="line">DELETE:delete(String,Object....)</span><br><span class="line"></span><br><span class="line">HEAD:headForHeaders(String,Object....)</span><br><span class="line"></span><br><span class="line">OPTIONS:optionsForAllow(String,Object....)</span><br><span class="line"></span><br><span class="line">any:exchange(String,HttpMethod,HttpEntity&lt;?&gt;,Class&lt;T&gt;,Object...)</span><br><span class="line"> 	  execute(String,HttpMethod,RequestCallback,ResponseExtractor&lt;T&gt;,Objecr...)</span><br></pre></td></tr></table></figure>

<p>  调用：<br>      1、在启动类配置RestTemplate</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用Spring提供的RestTemplate发送HTTP请求到商品服务</span></span><br><span class="line"><span class="comment">//1.创建RestTemplate对象交给容器管理</span></span><br><span class="line"><span class="comment">//2.在使用的时候，调用其方法完成操作（getxxx，postxxx）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//配置RestTemplate交给spring管理</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RestTemplate <span class="title">getRestTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、编写下订单方法（什么地方要用就在什么地方注入，注入到控制器即可）</span><br><span class="line"></span><br><span class="line"><span class="comment">//注入RestTemplate对象</span></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@RequestMapping</span>(value = <span class="string">"/buy/&#123;id&#125;"</span>,method = RequestMethod.GET)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> Product <span class="title">findById</span><span class="params">(@pathVariable <span class="keyword">long</span> id)</span></span>&#123;</span><br><span class="line">	Product product = <span class="keyword">null</span>;</span><br><span class="line">	<span class="comment">//调用商品服务</span></span><br><span class="line">	<span class="comment">//这里的url是你要调用的微服务中的url，要调用微服务A输入A的地址，调用B输入B的地址</span></span><br><span class="line">	product = restTemplate.getForObject(url:<span class="string">"http://xxx.x.x.xxx:端口号/xxx/id"</span>，Product<span class="class">.<span class="keyword">class</span>)  </span></span><br><span class="line"><span class="class">				<span class="title">return</span> <span class="title">product</span></span>;</span><br><span class="line">			&#125;</span><br></pre></td></tr></table></figure>

<p>  正常微服务调用时，通过RestTemplate，再输入微服务的url即可，但微服务的url改变后都会导致服务调用者也需要改变url，耦合度过大，所以加入API网关，调用时只需要调用网关就可以。<br>  其中一个微服务的配置文件如果进行修改，可能导致整个系统的所有配置都需要修改，所以需要进行配置统一管理。<br>  为了记录日志，正常的情况下，当微服务之间相互调用，会让日志过于分散，所以需要引入链路追踪，方便定位问题。</p>
<h2 id="微服务注册中心"><a href="#微服务注册中心" class="headerlink" title="微服务注册中心"></a>微服务注册中心</h2><p>  相当于微服务架构中的通讯录，他记录的服务和服务地址的映射关系，在分布式架构中，服务会到这里注册，当服务需要调用其他服务时，这里可以找到其他服务地址，以便于进行调用。</p>
<p>   注册中心的主要作用：<br>         1、服务发现：服务注册/反注册、服务订阅/取消订阅、服务路由（可选）<br>         2、服务配置：配置订阅、配置下发<br>         3、服务健康检测：检查服务提供者的健康情况。</p>
<p>   常见的注册中心：Zookeeper（cp）、Consul（cp）、Eureka（ap 常用）、Nacos（ap）</p>
<p>Eureka（高可用集群）<br>       由三个组成：Eureka Server（提供服务注册和发现）、Service Provider(服务提供方。将自身服务注册到Eureka，使服务消费方能够找到)、Service Consumer(服务消费方。从Eureka获取注册服务列表，从而消费服务)</p>
<p>  使用步骤：<br>         1、搭建Eureka Server<br>         1.1创建工程<br>         1.2导入依赖<br>         1.3配置配置文件<br>         1.4配置启动类<br>         2、将服务提供则注册到eureka Server上<br>         2.1引入EurekaClient的依赖<br>         2.2修改配置文件（服务提供者的），添加EurekaServer的信息<br>         2.3修改服务提供者启动类，添加服务发现的支持（可选）{新版Springcloud当配置完会自动将信息注册，不在服务提供者启动类写注解也可以}<br>         3、服务消费者通过注册中心获取服务列表并调用</p>
<p>  Eureka中的元数据：服务的主机名，ip等信息，通过eureka server进行获取，用于服务之间的调<br>  通过DiscoveryClient对象调用getInstances（“服务名称”）方法获得一个list返回值，再通过该返回值.get（0）获取一个ServiceInstance对象，这个对象的.getHost（）与.getPort方法可以分别获取主机地址与端口号，使得可以灵活改变微服务的地址与端口号</p>
<p>  Eureka高可用：可以制作多个Eureka，让其之间相互链接，如果第一个挂掉了，消费者通过第二个还可以接着访问微服务，不会让服务器直接宕机无法运行，而且当Eureka互相注册时，他们的信息会互相同步，但为了高可用，还是需要将服务注册到第二个Eureka，地址之间用“,”分开。<br>  操作：<br>       1、准备两个EurekaServer，需要互相注册（修改配置文件），1号Server：9000   2号Server：8000<br>       2、需要将微服务注册到两个EurekaServer上（修改配置文件）<br>  关于Eureka的配置，参考<a href="https://www.cnblogs.com/ouyida3/p/9747423.html" target="_blank" rel="noopener">https://www.cnblogs.com/ouyida3/p/9747423.html</a></p>
<p>  自我保护机制：检查其他的微服务、Eureka是否挂掉，检查服务是否有固定时间发心跳反应</p>
<p>  SpringBoot的自动装配：可以通过启动类会自动执行selectImports的特点，我们可以自己定义配置文件与SpringBoot中factory的配置文件（里面包含很多对象），可以通过该特点让框架帮我们创建对象。</p>
<p>  Eureka-Server的启动过程：通过Spring.factory中的配置创建EurekaController，配合页面完成相关功能，创建jerseyApplication，借助这个找到@Path、@Provider发布web接口让EurekaClient调用</p>
<p>  图片：<br>     链接：<a href="https://pan.baidu.com/s/1FzxXNLBmqL6af3T_RIZmng" target="_blank" rel="noopener">https://pan.baidu.com/s/1FzxXNLBmqL6af3T_RIZmng</a><br>     提取码：gkb3</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/03/SpringCloud%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9%E5%AD%A6%E4%B9%A0/" data-id="ckc5veq7600007su3823laoam" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="n-重装系统后重新整理的hexo以及git的遇到的问题" class="article article-type-n" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/01/%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F%E5%90%8E%E9%87%8D%E6%96%B0%E6%95%B4%E7%90%86%E7%9A%84hexo%E4%BB%A5%E5%8F%8Agit%E7%9A%84%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" class="article-date">
  <time datetime="2020-06-30T16:37:59.000Z" itemprop="datePublished">2020-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/01/%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F%E5%90%8E%E9%87%8D%E6%96%B0%E6%95%B4%E7%90%86%E7%9A%84hexo%E4%BB%A5%E5%8F%8Agit%E7%9A%84%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">重装系统后重新整理的hexo以及git的遇到的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="关于git的"><a href="#关于git的" class="headerlink" title="关于git的"></a>关于git的</h2><p>   由于前阶段因为考试太久没整理电脑以及对编程的学习，很多东西都忘了一部分了，所以熟能生巧很重要。之前电脑重装完，这几天重新整理好了环境变量以及开发工具，然后复习之前的内容。昨天重装了git，然后也重新复习了一遍。</p>
<p>   关于git的使用<br>   先在远端创建好仓库，然后git clone 地址   将仓库克隆到本地<br>   分为四步走<br>   1、touch 文件名               –》创建文件，也可以直接在文件夹创建<br>   2、git add 文件名            –》将文件从工作区添加到暂存区<br>   3、git commit -m ‘描述内容’    –》将暂存区域添加到本地仓库，填写的描述内容表示本次的操作是对文件的处理<br>   4、git push                  –》将文件提交到远端仓库</p>
<p>   修改文件也是同样的，修改文件会将文件转义到工作区，所以当编辑完文件后，就需要从新从第二步开始，从新提交</p>
<h2 id="关于hexo博客框架的"><a href="#关于hexo博客框架的" class="headerlink" title="关于hexo博客框架的"></a>关于hexo博客框架的</h2><p>   这次的博客框架出现了一个BUG，页面没有渲染（partial转义失败）,导致显示只会显示出一部分混乱的HTML，这时候需要重新安装一个插件，由于我使用的是淘宝的镜像，使用的是cnpm，所以对应的需要用的命令是“cnpm install”。<br>   还有就是hexo框架支持Markdown语法，但是我电脑上没有相关的软件，只能用EverEdit来对博客文章内容编写，无法插入图片，需要学习一下Markdown语法。</p>
<p>   这几天先整理一下之前学习的内容，巩固一下对于数据库SQL优化相关的内容以及后面的关于MQ、redis这些内容，这周要把Docker看一下，以及重新制作一下之前的项目，电脑重装后数据库没做备份处理，导致之前项目的数据内容全部丢失，需要重新整理一遍。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/01/%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F%E5%90%8E%E9%87%8D%E6%96%B0%E6%95%B4%E7%90%86%E7%9A%84hexo%E4%BB%A5%E5%8F%8Agit%E7%9A%84%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" data-id="ckc277fps000044u3fmk518vw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/30/hello-world/" class="article-date">
  <time datetime="2020-06-30T13:29:28.194Z" itemprop="datePublished">2020-06-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/30/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/30/hello-world/" data-id="ckc1z3i060000awu3hgt795r7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/03/%E5%85%B3%E4%BA%8ESpringBoot%E7%9A%84%E5%AE%9A%E6%97%B6%E6%B3%A8%E8%A7%A3-Scheduled/">关于SpringBoot的定时注解@Scheduled</a>
          </li>
        
          <li>
            <a href="/2021/03/09/%E5%85%B3%E4%BA%8ESimBot%E7%9A%84%E5%AD%A6%E4%B9%A0/">关于SimBot的学习</a>
          </li>
        
          <li>
            <a href="/2020/07/30/%E2%80%9CVUE%E7%9A%84%E5%AD%A6%E4%B9%A0/">“VUE的学习</a>
          </li>
        
          <li>
            <a href="/2020/07/26/swagger%E7%9A%84%E5%AD%A6%E4%B9%A0/">swagger的学习</a>
          </li>
        
          <li>
            <a href="/2020/07/20/MyBatisPlus%E5%A4%8D%E4%B9%A0/">MyBatisplus复习</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>